# ИНСТРУКЦИЯ ПО СОЗДАНИЮ ПРОМОКОДОВ

## Быстрое создание промокодов через Supabase

### 1. Откройте Supabase Dashboard
- Перейдите на https://app.supabase.com
- Выберите ваш проект
- Откройте SQL Editor (слева в меню)

### 2. Создание промокода для полного доступа

```sql
INSERT INTO promocodes (
    code,
    promocode_type,
    description,
    price_rub,
    is_active,
    max_uses,
    created_by
) VALUES (
    'ВАШ_ПРОМОКОД',         -- Замените на нужный код
    'all_courses',          -- Полный доступ ко всем разделам
    'Описание промокода',   -- Замените на описание
    4900,                   -- Цена в рублях (или 0 для бесплатного)
    true,                   -- Активен
    100,                    -- Максимум использований
    (SELECT id FROM admin_users LIMIT 1)  -- ID админа
);
```

### 3. Примеры готовых промокодов

**Бесплатный тестовый промокод:**
```sql
INSERT INTO promocodes (code, promocode_type, description, price_rub, is_active, created_by) 
VALUES ('ТЕСТ2025', 'all_courses', 'Бесплатный тестовый доступ', 0, true, (SELECT id FROM admin_users LIMIT 1));
```

**Промокод со скидкой:**
```sql
INSERT INTO promocodes (code, promocode_type, description, price_rub, discount_percent, is_active, created_by) 
VALUES ('СКИДКА30', 'all_courses', 'Скидка 30% на все курсы', 3430, 30, true, (SELECT id FROM admin_users LIMIT 1));
```

### 4. Проверка промокодов
```sql
SELECT code, promocode_type, description, price_rub, is_active, used_count, max_uses 
FROM promocodes 
ORDER BY created_at DESC;
```

### 5. Деактивация промокода
```sql
UPDATE promocodes SET is_active = false WHERE code = 'ВАШ_ПРОМОКОД';
```

---

## Поля таблицы promocodes:

- **code** - Текст промокода (например: "ИСЛАМ2025")
- **promocode_type** - Тип: "all_courses" (полный доступ) или "single_course" (один курс)
- **description** - Описание промокода
- **price_rub** - Цена в рублях (0 = бесплатный)
- **discount_percent** - Процент скидки (может быть null)
- **course_ids** - JSON массив ID курсов для single_course типа
- **is_active** - Активен ли промокод (true/false)
- **max_uses** - Максимальное количество использований (null = без ограничений)
- **expires_at** - Дата истечения (null = не истекает)
- **used_count** - Счетчик использований (автоматически)
- **created_by** - ID создавшего админа

Промокоды автоматически работают для защиты разделов "Уроки" и "Вопросы-Ответы".